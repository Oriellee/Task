<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>3.2</title>
	<link rel="stylesheet" type="text/css" href="E:\Github\Task\1.8\bootstrap\css\bootstrap.min.css">
	<style type="text/css">
		.box{
			width: 480px;
			height: 500px;
			border: 1px solid red;
			text-align: right;
			padding:30px;
			margin: 30px auto;
		}
		.box div{
			margin:25px 0;
		}
		.box p{
			text-align: left;
			margin: 5px 75px 0;
			color: grey;
		}
		.box label{
			font-size: 15px;
		}
		.box input{
			width: 350px;
			height: 30px;
			border-radius:20px;
			border: 1px solid #C0C0C0;
			outline: none;
			padding: 0 10px;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="name">
			<label>名称 ： </label>
			<input type="text" class="nameInput">
			<p class="nameText"></p>
		</div>
		<div class="password">
			<label>密码 ： </label>
			<input type="password" class="passwordInput">
			<p class="passwordText"></p>
		</div>
		<div class="again">
			<label>密码 ： </label>
			<input type="password" class="againInput">
			<p class="againText"></p>
		</div>
		<div class="mail">
			<label>邮箱 ： </label>
			<input type="email" class="mailInput">
			<p class="mailText"></p>
		</div>
		<div class="number">
			<label>手机号 ： </label>
			<input type="text" class="numberInput">
			<p class="numberText"></p>
		</div>
		<button class="btn btn-primary">提交</button>
	</div>

	<script type="text/javascript">
		var nameInput = document.querySelector(".nameInput");
		var nameText = document.querySelector(".nameText");
		var passwordInput = document.querySelector(".passwordInput");
		var passwordText = document.querySelector(".passwordText");
		var againInput = document.querySelector(".againInput");
		var againText = document.querySelector(".againText");
		var mailInput = document.querySelector(".mailInput");
		var mailText = document.querySelector(".mailText");
		var numberInput = document.querySelector(".numberInput");
		var numberText = document.querySelector(".numberText");

		var btn = document.querySelector(".btn");

		function strlen(str){
		    var len = 0;
		    for (var i=0; i<str.length; i++) { 
		     var c = str.charCodeAt(i); 
		    //单字节加1 
		     if ((c >= 0x0001 && c <= 0x007e) || (0xff60<=c && c<=0xff9f))    { 
		       len++; 
		     } 
		     else { 
		      len+=2; 
		     } 
		    } 
		    return len;
		}
		function containSpecial(s) { 
    		var containSpecial = RegExp(/[(\ )(\~)(\!)(\@)(\#) (\$)(\%)(\^)(\&)(\*)(\()(\))(\-)(\_)(\+)(\=) (\[)(\])(\{)(\})(\|)(\\)(\;)(\:)(\')(\")(\,)(\.)(\/) (\<)(\>)(\?)(\)]+/); 
    		return (containSpecial.test(s)); 
    	}
    	function email(mail){
    		var email= /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;  
		          return (email.test(mail));  
    	}
    	function phonenumber(phone){
    		var phonenumber=/^1(3|4|5|7|8)\d{9}$/;
			    if(!(phonenumber.test(phone))){
			        return false;
			    }
			    else{
			    	return true;
			    }
    	}
		nameInput.onfocus = function(){
			nameText.innerHTML = "必填，长度为4~16位字符";
		}
		passwordInput.onfocus = function(){
			passwordText.innerHTML = "请填写密码";
		}
		againInput.onfocus = function(){
			againText.innerHTML = "请再次输入密码";
		}
		mailInput.onfocus = function(){
			mailText.innerHTML = "请填写邮箱账号";
		}
		numberInput.onfocus = function(){
			numberText.innerHTML = "请填写手机号码";
		}
		nameInput.onblur = function(){
			if(nameInput.value == ""){
				nameText.innerHTML = "名称不能为空！";
				nameText.style.color = "red";
				nameInput.style.border = "1px solid red";
			}else if(strlen(nameInput.value)<4||strlen(nameInput.value)>16){
				nameText.innerHTML = "长度为4~16位字符!";
				nameText.style.color = "red";
				nameInput.style.border = "1px solid red";
			}else if(containSpecial(nameInput.value)){
				nameText.innerHTML = "不能输入特殊字符！";
				nameText.style.color = "red";
				nameInput.style.border = "1px solid red";
			}else{
				nameText.innerHTML = "名称正确";
				nameText.style.color = "green";
				nameInput.style.border = "1px solid green";
			}
			
		}
		passwordInput.onblur = function(){
		if(passwordInput.value == ""){
				passwordText.innerHTML = "密码不能为空！";
				passwordText.style.color = "red";
				passwordInput.style.border = "1px solid red";
			}else if(strlen(passwordInput.value)<6||strlen(passwordInput.value)>16){
				passwordText.innerHTML = "长度6~16位字符!";
				passwordText.style.color = "red";
				passwordInput.style.border = "1px solid red";
			}else if(containSpecial(passwordInput.value)){
				passwordText.innerHTML = "不能输入特殊字符！";
				passwordText.style.color = "red";
				passwordInput.style.border = "1px solid red";
			}else{
				passwordText.innerHTML = "密码格式正确";
				passwordText.style.color = "green";
				passwordInput.style.border = "1px solid green";
			}
			
		}
		againInput.onblur = function(){
			if(againInput.value == ""){
				againText.innerHTML = "请再次输入密码！";
				againText.style.color = "red";
				againInput.style.border = "1px solid red";
			}else if(strlen(againInput.value)<4||strlen(againInput.value)>16){
				againText.innerHTML = "长度为4~16位字符!";
				againText.style.color = "red";
				againInput.style.border = "1px solid red";
			}else if(containSpecial(againInput.value)){
				againText.innerHTML = "不能输入特殊字符！";
				againText.style.color = "red";
				againInput.style.border = "1px solid red";
			}else if(againInput.value !== passwordInput.value){
				againText.innerHTML = "两次密码不相同！";
				againText.style.color = "red";
				againInput.style.border = "1px solid red";
			}
			else{
				againText.innerHTML = "密码正确";
				againText.style.color = "green";
				againInput.style.border = "1px solid green";
			}
			
		}
		mailInput.onblur = function(){
			if(mailInput.value == ""){
				mailText.innerHTML = "邮箱不能为空！";
				mailText.style.color = "red";
				mailInput.style.border = "1px solid red";
			}else if(!(email(mailInput.value))){
				mailText.innerHTML = "邮箱格式有误！";
				mailText.style.color = "red";
				mailInput.style.border = "1px solid red";
			}else{
				mailText.innerHTML = "邮箱格式正确";
				mailText.style.color = "green";
				mailInput.style.border = "1px solid green";
			}
			
		}
		numberInput.onblur = function(){
			console.log(phonenumber(numberInput));
			// if(numberInput.value == ""){
			// 	numberText.innerHTML = "手机号码不能为空！";
			// 	numberText.style.color = "red";
			// 	numberInput.style.border = "1px solid red";
			// }else if(!(phonenumber(numberInput))){
			// 	numberText.innerHTML = "手机号码格式有误！";
			// 	numberText.style.color = "red";
			// 	numberInput.style.border = "1px solid red";
			// }else{
			// 	numberText.innerHTML = "手机号码格式正确";
			// 	numberText.style.color = "green";
			// 	numberInput.style.border = "1px solid green";
			// }
			
		}
	</script>
</body>
</html>